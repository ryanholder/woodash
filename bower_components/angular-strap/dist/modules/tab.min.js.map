{"version":3,"file":"tab.min.js","sources":["tab/tab.js"],"names":["angular","module","provider","defaults","this","animation","template","navClass","activeClass","controller","$scope","$element","$attrs","self","$options","copy","forEach","key","isDefined","$navClass","$activeClass","$panes","$viewChangeListeners","$push","pane","push","$active","$setActive","value","fn","$get","$tab","directive","$window","$animate","require","transclude","scope","templateUrl","element","attr","link","attrs","controllers","ngModelCtrl","bsTabsCtrl","$setViewValue","$formatters","modelValue","$sce","render","index","indexOf","active","addClass","$observe","newValue","title","trustAsHtml"],"mappings":"AAOA,YACAA,SAAQC,OAAO,yBAA0BC,SAAS,OAAQ,WACxD,GAAIC,GAAWC,KAAKD,UAChBE,UAAW,UACXC,SAAU,mBACVC,SAAU,WACVC,YAAa,UAEbC,EAAaL,KAAKK,WAAa,SAAUC,EAAQC,EAAUC,GAC3D,GAAIC,GAAOT,IAEXS,GAAKC,SAAWd,QAAQe,KAAKZ,GAC7BH,QAAQgB,SACN,YACA,WACA,eACC,SAAUC,GACPjB,QAAQkB,UAAUN,EAAOK,MAC3BJ,EAAKC,SAASG,GAAOL,EAAOK,MAGhCP,EAAOS,UAAYN,EAAKC,SAASP,SACjCG,EAAOU,aAAeP,EAAKC,SAASN,YACpCK,EAAKQ,OAASX,EAAOW,UACrBR,EAAKS,wBACLT,EAAKU,MAAQ,SAAUC,GACrBX,EAAKQ,OAAOI,KAAKD,IAEnBX,EAAKQ,OAAOK,QAAU,EACtBb,EAAKc,WAAajB,EAAOiB,WAAa,SAAUC,GAC9Cf,EAAKQ,OAAOK,QAAUE,EACtBf,EAAKS,qBAAqBN,QAAQ,SAAUa,GAC1CA,OAIRzB,MAAK0B,KAAO,WACV,GAAIC,KAGJ,OAFAA,GAAK5B,SAAWA,EAChB4B,EAAKtB,WAAaA,EACXsB,KAERC,UAAU,UACX,UACA,WACA,OACA,SAAUC,EAASC,EAAUH,GAC3B,GAAI5B,GAAW4B,EAAK5B,QACpB,QACEgC,SACE,WACA,UAEFC,YAAY,EACZC,OAAO,EACP5B,WAAYsB,EAAKtB,WACjB6B,YAAa,SAAUC,EAASC,GAC9B,MAAOA,GAAKlC,UAAYH,EAASG,UAEnCmC,KAAM,SAAkBJ,EAAOE,EAASG,EAAOC,GAC7C,GAAIC,GAAcD,EAAY,GAC1BE,EAAaF,EAAY,EACzBC,KAEFC,EAAWvB,qBAAqBG,KAAK,WACnCmB,EAAYE,cAAcD,EAAWxB,OAAOK,WAG9CkB,EAAYG,YAAYtB,KAAK,SAAUuB,GAGrC,MADAH,GAAWlB,WAAwB,EAAbqB,GACfA,UAMhBhB,UAAU,UACX,UACA,WACA,OACA,SAAUC,EAASC,EAAUe,GAC3B,OACEd,SACE,YACA,WAEFE,OAAO,EACPI,KAAM,SAAkBJ,EAAOE,EAASG,EAAOC,GAe7C,QAASO,KACP,GAAIC,GAAQN,EAAWxB,OAAO+B,QAAQf,GAClCgB,EAASR,EAAWxB,OAAOK,OAC/BQ,GAASiB,IAAUE,EAAS,WAAa,eAAed,EAASM,EAAW/B,SAASN,aAjBvF,GACIqC,IADcF,EAAY,GACbA,EAAY,GAE7BJ,GAAQe,SAAS,YAEjBZ,EAAMa,SAAS,QAAS,SAAUC,GAChCnB,EAAMoB,MAAQR,EAAKS,YAAYF,KAG7BX,EAAW/B,SAAST,WACtBkC,EAAQe,SAAST,EAAW/B,SAAST,WAGvCwC,EAAWtB,MAAMc,GAMjBQ,EAAWvB,qBAAqBG,KAAK,WACnCyB,MAEFA","sourcesContent":["'use strict';\n\nangular.module('mgcrea.ngStrap.tab', [])\n\n  .provider('$tab', function() {\n\n    var defaults = this.defaults = {\n      animation: 'am-fade',\n      template: 'tab/tab.tpl.html',\n      navClass: 'nav-tabs',\n      activeClass: 'active'\n    };\n\n    var controller = this.controller = function($scope, $element, $attrs) {\n      var self = this;\n\n      // Attributes options\n      self.$options = angular.copy(defaults);\n      angular.forEach(['animation', 'navClass', 'activeClass'], function(key) {\n        if(angular.isDefined($attrs[key])) self.$options[key] = $attrs[key];\n      });\n\n      // Publish options on scope\n      $scope.$navClass = self.$options.navClass;\n      $scope.$activeClass = self.$options.activeClass;\n\n      self.$panes = $scope.$panes = [];\n\n      self.$viewChangeListeners = [];\n\n      self.$push = function(pane) {\n        self.$panes.push(pane);\n      };\n\n      self.$panes.$active = 0;\n      self.$setActive = $scope.$setActive = function(value) {\n        self.$panes.$active = value;\n        self.$viewChangeListeners.forEach(function(fn) {\n          fn();\n        });\n      };\n\n    };\n\n    this.$get = function() {\n      var $tab = {};\n      $tab.defaults = defaults;\n      $tab.controller = controller;\n      return $tab;\n    };\n\n  })\n\n  .directive('bsTabs', function($window, $animate, $tab) {\n\n    var defaults = $tab.defaults;\n\n    return {\n      require: ['?ngModel', 'bsTabs'],\n      transclude: true,\n      scope: true,\n      controller: $tab.controller,\n      templateUrl: function(element, attr) {\n        return attr.template || defaults.template;\n      },\n      link: function postLink(scope, element, attrs, controllers) {\n\n        var ngModelCtrl = controllers[0];\n        var bsTabsCtrl = controllers[1];\n\n        if(ngModelCtrl) {\n\n          // Update the modelValue following\n          bsTabsCtrl.$viewChangeListeners.push(function() {\n            ngModelCtrl.$setViewValue(bsTabsCtrl.$panes.$active);\n          });\n\n          // modelValue -> $formatters -> viewValue\n          ngModelCtrl.$formatters.push(function(modelValue) {\n            // console.warn('$formatter(\"%s\"): modelValue=%o (%o)', element.attr('ng-model'), modelValue, typeof modelValue);\n            bsTabsCtrl.$setActive(modelValue * 1);\n            return modelValue;\n          });\n\n        }\n\n      }\n    };\n\n  })\n\n  .directive('bsPane', function($window, $animate, $sce) {\n\n    return {\n      require: ['^?ngModel', '^bsTabs'],\n      scope: true,\n      link: function postLink(scope, element, attrs, controllers) {\n\n        var ngModelCtrl = controllers[0];\n        var bsTabsCtrl = controllers[1];\n\n        // Add base class\n        element.addClass('tab-pane');\n\n        // Observe title attribute for change\n        attrs.$observe('title', function(newValue, oldValue) {\n          scope.title = $sce.trustAsHtml(newValue);\n        });\n\n        // Add animation class\n        if(bsTabsCtrl.$options.animation) {\n          element.addClass(bsTabsCtrl.$options.animation);\n        }\n\n        // Push pane to parent bsTabs controller\n        bsTabsCtrl.$push(scope);\n\n        function render() {\n          var index = bsTabsCtrl.$panes.indexOf(scope);\n          var active = bsTabsCtrl.$panes.$active;\n          $animate[index === active ? 'addClass' : 'removeClass'](element, bsTabsCtrl.$options.activeClass);\n        }\n\n        bsTabsCtrl.$viewChangeListeners.push(function() {\n          render();\n        });\n        render();\n\n      }\n    };\n\n  });\n"],"sourceRoot":"/source/"}