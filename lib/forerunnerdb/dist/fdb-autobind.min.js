!function(Va){if("object"==typeof exports&&"undefined"!=typeof module)module.exports=Va();else if("function"==typeof define&&define.amd)define([],Va);else{var m;"undefined"!=typeof window?m=window:"undefined"!=typeof global?m=global:"undefined"!=typeof self&&(m=self);m.ForerunnerDBAutoBind=Va()}}(function(){return function m(P,U,h){function a(f,z){if(!U[f]){if(!P[f]){var da="function"==typeof require&&require;if(!z&&da)return da(f,!0);if(b)return b(f,!0);da=Error("Cannot find module '"+f+"'");throw da.code=
"MODULE_NOT_FOUND",da;}da=U[f]={exports:{}};P[f][0].call(da.exports,function(b){var z=P[f][1][b];return a(z?z:b)},da,da.exports,m,P,U,h)}return U[f].exports}for(var b="function"==typeof require&&require,f=0;f<h.length;f++)a(h[f]);return a}({1:[function(m,P,U){m=m("../lib/AutoBind");P.exports=m},{"../lib/AutoBind":2}],2:[function(m,P,U){U=ForerunnerDB.shared;var h={};U.addModule("AutoBind",h);h.extendCollection=function(b){var a=b.prototype.init,Z=b.prototype._dataReplace,z=b.prototype._dataInsertAtIndex,
da=b.prototype._dataRemoveAtIndex,h=b.prototype._updateProperty,K=b.prototype._updateIncrement,M=b.prototype._updateSpliceMove,m=b.prototype._updateSplicePush,ia=b.prototype._updatePush,U=b.prototype._updatePull,pa=b.prototype._updateMultiply,oa=b.prototype._updateRename,P=b.prototype._updateUnset,$=b.prototype._updatePop,Ba=b.prototype.drop;b.prototype.init=function(){this._linked=0;a.apply(this,arguments)};b.prototype.isLinked=function(){return Boolean(this._linked)};b.prototype.link=function(b,
a,f){if(window.jQuery){this._links=this._links||{};var Z,z;a&&"object"===typeof a?a.template&&"string"===typeof a.template&&(Z=this.objectId(a.template),z=a.template):Z=a;if(!this._links[Z]){if(jQuery(b).length){if(!jQuery.templates[Z]){if(!z)if(z=jQuery(a),z.length)z=jQuery(z[0]).html();else throw'ForerunnerDB.AutoBind "'+this.name()+'": Unable to bind collection to target because template "'+a+'" does not exist';jQuery.views.templates(Z,z)}f&&f.wrap?(a={},a[f.wrap]=this._data,this.debug()&&console.log('ForerunnerDB.AutoBind: Binding with data wrapper "'+
f.wrap+'" for collection "'+this.name()+'" to output target: '+b),jQuery.templates[Z].link(b,a)):jQuery.templates[Z].link(b,this._data);this._links[Z]=b;this._linked++;this.debug()&&console.log('ForerunnerDB.AutoBind: Added binding collection "'+this.name()+'" to output target: '+b);return this}throw'ForerunnerDB.AutoBind "'+this.name()+'": Cannot bind collection to target selector "'+b+'" because it does not exist in the DOM!';}throw'ForerunnerDB.AutoBind "'+this.name()+'": Attempt to bind a duplicate link from collection to the target: '+
b+" with the template: "+Z;}throw'ForerunnerDB.AutoBind "'+this.name()+'": Cannot data-bind without jQuery. Please add jQuery to your page!';};b.prototype.unlink=function(b,a){if(window.jQuery){this._links=this._links||{};var f;a&&"object"===typeof a?a.template&&"string"===typeof a.template&&(f=this.objectId(a.template)):f=a;if(this._links[f])return jQuery.templates[f].unlink(b),delete this._links[f],this._linked--,this.debug()&&console.log('ForerunnerDB.AutoBind: Removed binding collection "'+this.name()+
'" to output target: '+b),this;console.log('ForerunnerDB.AutoBind "'+this.name()+'": Cannot remove link from collection, one does not exist to the target: '+b+" with the template: "+a)}else throw'ForerunnerDB.AutoBind "'+this.name()+'": Cannot data-bind without jQuery. Please add jQuery to your page!';return this};b.prototype._dataReplace=function(b){this._linked?(this.debug()&&console.log('ForerunnerDB.AutoBind: Replacing some data in document for collection "'+this.name()+'"'),jQuery.observable(this._data).refresh(b)):
Z.apply(this,arguments)};b.prototype._dataInsertAtIndex=function(b,a){this._linked?(this.debug()&&console.log('ForerunnerDB.AutoBind: Inserting some data for collection "'+this.name()+'"'),jQuery.observable(this._data).insert(b,a)):z.apply(this,arguments)};b.prototype._dataRemoveAtIndex=function(b){this._linked?(this.debug()&&console.log('ForerunnerDB.AutoBind: Removing some data for collection "'+this.name()+'"'),jQuery.observable(this._data).remove(b)):da.apply(this,arguments)};b.prototype._updateProperty=
function(b,a,f){this._linked?(this.debug()&&console.log('ForerunnerDB.AutoBind: Setting document property "'+a+'" for collection "'+this.name()+'"'),jQuery.observable(b).setProperty(a,f)):h.apply(this,arguments)};b.prototype._updateIncrement=function(b,a,f){this._linked?(this.debug()&&console.log('ForerunnerDB.AutoBind: Incrementing document property "'+a+'" for collection "'+this.name()+'"'),jQuery.observable(b).setProperty(a,b[a]+f)):K.apply(this,arguments)};b.prototype._updateSpliceMove=function(b,
a,f){this._linked?(this.debug()&&console.log('ForerunnerDB.AutoBind: Moving document array index from "'+a+'" to "'+f+'" for collection "'+this.name()+'"'),jQuery.observable(b).move(a,f)):M.apply(this,arguments)};b.prototype._updateSplicePush=function(b,a,f){this._linked?(this.debug()&&console.log('ForerunnerDB.AutoBind: Pushing item into document sub-array for collection "'+this.name()+'"'),b.length>a?jQuery.observable(b).insert(a,f):jQuery.observable(b).insert(f)):m.apply(this,arguments)};b.prototype._updatePush=
function(b,a){this._linked?(this.debug()&&console.log('ForerunnerDB.AutoBind: Pushing item into document sub-array for collection "'+this.name()+'"'),jQuery.observable(b).insert(a)):ia.apply(this,arguments)};b.prototype._updatePull=function(b,a){this._linked?(this.debug()&&console.log('ForerunnerDB.AutoBind: Pulling item from document sub-array for collection "'+this.name()+'"'),jQuery.observable(b).remove(a)):U.apply(this,arguments)};b.prototype._updateMultiply=function(b,a,f){this._linked?(this.debug()&&
console.log('ForerunnerDB.AutoBind: Multiplying value for collection "'+this.name()+'"'),jQuery.observable(b).setProperty(a,b[a]*f)):pa.apply(this,arguments)};b.prototype._updateRename=function(b,a,f){this._linked?(this.debug()&&console.log('ForerunnerDB.AutoBind: Renaming property "'+a+'" to "'+f+'" on document for collection "'+this.name()+'"'),jQuery.observable(b).setProperty(f,b[a]),jQuery.observable(b).removeProperty(a)):oa.apply(this,arguments)};b.prototype._updateUnset=function(b,a){this._linked?
(this.debug()&&console.log('ForerunnerDB.AutoBind: Removing property "'+a+'" from document for collection "'+this.name()+'"'),jQuery.observable(b).removeProperty(a)):P.apply(this,arguments)};b.prototype._updatePop=function(b,a){var f,Z=!1;this._linked?0<b.length&&(this.debug()&&console.log('ForerunnerDB.AutoBind: Popping item from sub-array in document for collection "'+this.name()+'"'),1===a?f=b.length-1:-1===a&&(f=0),-1<f&&(jQuery.observable(arr).remove(f),Z=!0)):Z=$.apply(this,arguments);return Z};
b.prototype.drop=function(){var b;if(this._linked)for(b in this._links)this._links.hasOwnProperty(b)&&this.unlink(this._links[b],b);return Ba.apply(this,arguments)}};h.extendView=function(b){var a=b.prototype.init;b.prototype.init=function(){this._linked=0;a.apply(this,arguments)};b.prototype.isLinked=function(){return this.data().isLinked()};b.prototype.link=function(b,a,f){var h=this.publicData();this.debug()&&console.log('ForerunnerDB.AutoBind: Setting up data binding on view "'+this.name()+'" in underlying (internal) view collection "'+
h.name()+'" for output target: '+b);h.link(b,a,f);return this};b.prototype.unlink=function(b,a){var f=this.publicData();this.debug()&&console.log('ForerunnerDB.AutoBind: Removing data binding on view "'+this.name()+'" in underlying (internal) view collection "'+f.name()+'" for output target: '+b);f.unlink(b,a);return this}};h.extendOverview=function(b){b.prototype.isLinked=function(){return this.data().isLinked()};b.prototype.link=function(b,a,z){this._data.link.apply(this._data,arguments);this._refresh()};
b.prototype.unlink=function(b,a){this._data.unlink.apply(this._data,arguments);this._refresh()}};h.extendDocument=function(b){b.prototype.isLinked=function(){return Boolean(this._linked)};b.prototype.link=function(b,a,z){if(window.jQuery){this._links=this._links||{};this._linked||(this._linked=0);var h,m;a&&"object"===typeof a?a.template&&"string"===typeof a.template&&(h=this.objectId(a.template),m=a.template):h=a;if(!this._links[h]){if(jQuery(b).length){if(!jQuery.templates[h]){if(!m)if(m=jQuery(a),
m.length)m=jQuery(m[0]).html();else throw'ForerunnerDB.AutoBind "'+this.name()+'": Unable to bind document to target because template does not exist: '+a;jQuery.views.templates(h,m)}z&&z.wrap?(a={},a[z.wrap]=this._data,jQuery.templates[h].link(b,a)):jQuery.templates[h].link(b,this._data);this._links[h]=b;this._linked++;this.debug()&&console.log('ForerunnerDB.AutoBind: Added binding document "'+this.name()+'" to target: '+b);return this}throw'ForerunnerDB.AutoBind "'+this.name()+'": Cannot bind document to target "'+
b+'" because it does not exist in the DOM!';}throw'ForerunnerDB.AutoBind "'+this.name()+'": Cannot create a duplicate link from document to the target: '+b+" with the template: "+h;}throw'ForerunnerDB.AutoBind "'+this.name()+'": Cannot data-bind without jQuery. Please add jQuery to your page!';};b.prototype.unlink=function(b,a){if(window.jQuery){this._links=this._links||{};var h;a&&"object"===typeof a?a.template&&"string"===typeof a.template&&(h=this.objectId(a.template)):h=a;if(this._links[h])return jQuery.templates[h].unlink(b),
delete this._links[h],this._linked--,this.debug()&&console.log('ForerunnerDB.AutoBind "'+this.name()+'": Removed binding document to target: '+b),this;console.log('ForerunnerDB.AutoBind "'+this.name()+'": Cannot remove link from document, one does not exist to the target: '+b+" with the template: "+a)}else throw'ForerunnerDB.AutoBind "'+this.name()+'": Cannot data-bind without jQuery. Please add jQuery to your page!';}};if("undefined"!==typeof jQuery)if(m("../lib/vendor/jsviews"),"undefined"!==typeof jQuery.views){m=
["Collection","View","Overview","Document"];var a;for(a=0;a<m.length;a++)U.moduleFinished(m[a],function(b,a){if(h["extend"+b])h["extend"+b](a)});U.finishModule("AutoBind")}else throw'ForerunnerDB.AutoBind "'+this.name()+'": Plugin cannot continue because jsViews is not loaded. Check your error log for url errors; it should have automatically loaded with this plugin.';else throw'ForerunnerDB.AutoBind "'+this.name()+'": Cannot data-bind without jQuery. Please add jQuery to your page!';U.finishModule("AutoBind");
P.exports=h},{"../lib/vendor/jsviews":3}],3:[function(m,P,U){window.jQuery&&(this.jQuery=window.jQuery,function(){(function(h,a,b){function f(b,q){for(var a in q.props)R.test(a)&&(b[a]=q.props[a])}function m(b){return b}function z(b){debugger;return b}function da(b){fa=(Ea._dbgMode=b)?"Unavailable (nested view): use #getIndex()":"";sa("dbg",Oa.dbg=Ja.dbg=b?z:m)}function U(b){this.name=(u.link?"JsViews":"JsRender")+" Error";this.message=b||this.name}function K(b,q){for(var a in q)b[a]=q[a];return b}
function M(b){return"function"===typeof b}function P(b,q,a){if(!va.rTag||b)I=b?b.charAt(0):I,C=b?b.charAt(1):C,v=q?q.charAt(0):v,aa=q?q.charAt(1):aa,ga=a||ga,b="\\"+I+"(\\"+ga+")?\\"+C,q="\\"+v+"\\"+aa,w="(?:(?:(\\w+(?=[\\/\\s\\"+v+"]))|(?:(\\w+)?(:)|(>)|!--((?:[^-]|-(?!-))*)--|(\\*)))\\s*((?:[^\\"+v+"]|\\"+v+"(?!\\"+aa+"))*?)",va.rTag=w+")",w=RegExp(b+w+"(\\/)?|(?:\\/(\\w+)))"+q,"g"),s=RegExp("<.*>|([^\\\\]|^)[{}]|"+b+".*"+q);return[I,C,v,aa,ga]}function ia(ha,q){q||(q=ha,ha=b);var a,c,y,g;y=this;
a=!q||"root"===q;if(ha){if(g=y.type===q?y:b,!g)if(a=y.views,y._.useKey)for(c in a){if(g=a[c].get(ha,q))break}else for(c=0,y=a.length;!g&&c<y;c++)g=a[c].get(ha,q)}else if(a)for(;y.parent.parent;)g=y=y.parent;else for(;y&&!g;)g=y.type===q?y:b,y=y.parent;return g}function za(){var ha=this.get("item");return ha?ha.index:b}function pa(){return this.index}function oa(ha){var q,a=this,c=a.linkCtx,y=(a.ctx||{})[ha];y===b&&c&&c.ctx&&(y=c.ctx[ha]);y===b&&(y=Oa[ha]);y&&M(y)&&!y._wrp&&(q=function(){return y.apply(this&&
this!==h?this:a,arguments)},q._wrp=!0,K(q,y));return q||y}function Qa(ha,q,a,c){var y,g,k=+a===a&&q.tmpl.bnds[a-1],e=q.linkCtx;a=(c=c!==b&&{props:{},args:[c]})||(k?k(q.data,q,L):a);g=a.args[0];if(ha||k)y=e&&e.tag,y||(y={_:{inline:!e,bnd:k},tagName:":",cvt:ha,flow:!0,tagCtx:a,_is:"tag"},e&&(e.tag=y,y.linkCtx=e,a.ctx=J(a.ctx,e.view.ctx)),va._lnk(y)),y._er=c&&g,f(y,a),a.view=q,y.ctx=a.ctx||{},delete a.ctx,q._.tag=y,g=$(y,y.convert||"true"!==ha&&ha)[0],g=k&&q._.onRender?q._.onRender(g,q,k):g,q._.tag=
b;return g!=b?g:""}function $(b,q){var a=b.tagCtx,c=a.view,y=a.args;q=q&&(""+q===q?c.getRsc("converters",q)||V("Unknown converter: '"+q+"'"):q);y=y.length||a.index?q?y.slice():y:[c.data];q&&(q.depends&&(b.depends=va.getDeps(b.depends,b,q.depends,q)),y[0]=q.apply(b,y));return y}function Ba(a,q){for(var c,g=this;c===b&&g;)c=(c=g.tmpl[a])&&c[q],g=g.parent;return c||L[a][q]}function La(a,q,c,g,y,e){var k,d,l,u,h,B,v,S,E,s="",C=q.linkCtx||0,w=q.ctx,z=c||q.tmpl,t=+g===g&&z.bnds[g-1];"tag"===a._is&&(k=a,
a=k.tagName,g=k.tagCtxs);k=k||C.tag;g=(e=e!==b&&(s+=e,[{props:{},args:[]}]))||(t?t(q.data,q,L):g);B=g.length;for(h=0;h<B;h++){h||c&&k||(S=q.getRsc("tags",a)||V("Unknown tag: {{"+a+"}}"));d=g[h];if(!C.tag||k._er)c=d.tmpl,c=d.content=c&&z.tmpls[c-1],K(d,{tmpl:(k?k:S).template||c,render:la,index:h,view:q,ctx:J(d.ctx,w)});if(c=d.props.tmpl)c=""+c===c?q.getRsc("templates",c)||D(c):c,d.tmpl=c;k||(S._ctr?(k=new S._ctr,E=!!k.init):va._lnk(k={render:S.render}),k._={inline:!C},C&&(C.tag=k,k.linkCtx=C),(k._.bnd=
t||C.fn)?k._.arrVws={}:k.dataBoundOnly&&V("{^{"+a+"}} tag must be data-bound"),k.tagName=a,k.parent=u=w&&w.tag,k._is="tag",k._def=S,k.tagCtxs=g);d.tag=k;k.dataMap&&k.tagCtxs&&(d.map=k.tagCtxs[h].map);k.flow||(v=d.ctx=d.ctx||{},d=k.parents=v.parentTags=w&&J(v.parentTags,w.parentTags)||{},u&&(d[u.tagName]=u),d[k.tagName]=v.tag=k)}q._.tag=k;if(!(k._er=e)){f(k,g[0]);k.rendering={};for(h=0;h<B;h++){d=k.tagCtx=k.tagCtxs[h];u=d.props;a=$(k,k.convert);if(g=u.dataMap||k.dataMap)if(a.length||u.dataMap){e=d.map;
if(!e||e.src!==a[0]||y)e&&e.src&&e.unmap(),e=d.map=g.map(a[0],u);a=[e.tgt]}k.ctx=d.ctx;!h&&E&&(g=k.template,k.init(d,C,k.ctx),E=b,k.template!==g&&(k._.tmpl=k.template),C&&(C.attr=k.attr=C.attr||k.attr));g=b;k.render&&(g=k.render.apply(k,a));a=a.length?a:[q];g=g!==b?g:d.render(a[0],!0)||(y?b:"");s=s?s+(g||""):g}delete k.rendering}k.tagCtx=k.tagCtxs[0];k.ctx=k.tagCtx.ctx;k._.inline&&(l=k.attr)&&l!==A&&(s="text"===l?Ja.html(s):"");return t&&q._.onRender?q._.onRender(s,q,t):s}function O(b,a,c,g,y,e,k,
d){var f="array"===a,l={key:0,useKey:f?0:1,id:""+F++,onRender:d,bnds:{}};this.data=g;this.tmpl=y;this.content=k;this.views=f?[]:{};this.parent=c;this.type=a||"top";this._=l;this.linked=!!d;c?(a=c.views,g=c._,g.useKey?(a[l.key="_"+g.useKey++]=this,this.index=fa,this.getIndex=za,e=g.tag,l.bnd=f&&(!e||!!e._.bnd&&e)):a.splice(l.key=this.index=e,0,this),this.ctx=b||c.ctx):this.ctx=b}function ea(b){var a,c,g,y,e,k;for(a in ma)if(y=ma[a],(e=y.compile)&&(c=b[a+"s"]))for(g in c)(y=c[g]=e(g,c[g],b))&&(k=va.onStore[a])&&
k(g,y,e)}function Ca(a,c,g){M(c)?c={depends:c.depends,render:c}:(c.baseTag&&(c.flow=!!c.flow,c=K(K({},c.baseTag),c)),(a=c.template)!==b&&(c.template=""+a===a?D[a]||D(a):a),!1!==c.init&&(a=c._ctr=function(){},(a.prototype=c).constructor=a));g&&(c._parentTmpl=g);return c}function Da(c,q,g,e){function y(q){if(""+q===q||0<q.nodeType){try{k=0<q.nodeType?q:!s.test(q)&&a&&a(h.document).find(q)[0]}catch(y){}k&&(q=D[c=c||k.getAttribute(ba)],q||(c=c||"_"+Ra++,k.setAttribute(ba,c),q=D[c]=Da(c,k.innerHTML,g,
e)),k=b);return q}}var d,k;q=q||"";d=y(q);e=e||(q.markup?q:{});e.tmplName=c;g&&(e._parentTmpl=g);!d&&q.markup&&(d=y(q.markup))&&d.fn&&(d.debug!==q.debug||d.allowCode!==q.allowCode)&&(d=d.markup);if(d!==b)return c&&!g&&(Sa[c]=function(){return q.render.apply(q,arguments)}),d.fn||q.fn?d.fn&&(q=c&&c!==d.tmplName?J(e,d):d):(q=qa(d,e),Ma(d.replace(t,"\\$&"),q)),ea(e),q}function Na(b){function a(c,q){this.tgt=b.getTgt(c,q)}M(b)&&(b={getTgt:b});b.baseMap&&(b=K(K({},b.baseMap),b));b.map=function(b,c){return new a(b,
c)};return b}function qa(b,a){var c,g=Ea.wrapMap||{},e=K({markup:b,tmpls:[],links:{},tags:{},bnds:[],_is:"template",render:W},a);a.htmlTag||(c=Pa.exec(b),e.htmlTag=c?c[1].toLowerCase():"");(c=g[e.htmlTag])&&c!==g.div&&(e.markup=u.trim(e.markup));return e}function ra(a,c){function g(d,f,k){var l,u,h;if(d&&"object"===typeof d&&!d.nodeType&&!d.markup&&!d.getTgt){for(u in d)g(u,d[u],f);return L}f===b&&(f=d,d=b);d&&""+d!==d&&(k=f,f=d,d=b);h=k?k[e]=k[e]||{}:g;u=c.compile;null===f?d&&delete h[d]:(f=u?f=
u(d,f,k):f,d&&(h[d]=f));u&&f&&(f._is=a);f&&(l=va.onStore[a])&&l(d,f,u);return f}var e=a+"s";L[e]=g;ma[a]=c}function wa(b,a,c){var g=this.jquery&&(this[0]||V('Unknown template: "'+this.selector+'"')),d=g.getAttribute(ba);return W.call(d?D[d]:D(g),b,a,c)}function Ka(b,a,c){if(Ea._dbgMode)try{return b.fn(a,c,L)}catch(g){return V(g,c)}return b.fn(a,c,L)}function W(b,a,c,g,d,e){return g||!this.fn._nvw||u.isArray(b)?la.call(this,b,a,c,g,d,e):Ka(this,b,{tmpl:this})}function la(a,c,g,d,e,f){var k,l,h,B,C,
v,s,S,E;h=this;var w="";!!c===c&&(g=c,c=b);!0===e&&(k=!0,e=0);h.tag?(v=h,h=h.tag,l=h._,C=h.tagName,S=l.tmpl||v.tmpl,E=h.attr&&h.attr!==A,c=J(c,h.ctx),s=v.content,!1===v.props.link&&(c=c||{},c.link=!1),d=d||v.view,a=arguments.length?a:d):S=h;if(S&&(!d&&a&&"view"===a._is&&(d=a),d&&(s=s||d.content,f=f||d._.onRender,a===d&&(a=d.data),c=J(c,d.ctx)),d&&"top"!==d.type||((c=c||{}).root=a),S.fn||(S=D[S]||D(S)),S)){v=f=!1!==(c&&c.link)&&!E&&f;!0===f&&(v=b,f=d._.onRender);c=S.helpers?J(S.helpers,c):c;if(u.isArray(a)&&
!g)for(B=k?d:e!==b&&d||new O(c,"array",d,a,S,e,s,f),k=0,l=a.length;k<l;k++)h=a[k],C=new O(c,"item",B,h,S,(e||0)+k,s,f),h=Ka(S,h,C),w+=B._.onRender?B._.onRender(h,C):h;else{if(d||!S.fn._nvw)B=k?d:new O(c,C||"data",d,a,S,e,s,f),l&&!h.flow&&(B.tag=h);w+=Ka(S,a,B)}return v?v(w,B):w}return""}function V(b,a,c){c=Ea.onError(b,a,c);if(""+b===b)throw new va.Err(c);return!a.linkCtx&&a.linked?Ja.html(c):c}function ka(b){V("Syntax error\n"+b)}function Ma(b,a,g,f){function y(a){(a-=J)&&C.push(b.substr(J,a).replace(N,
"\\n"))}function h(a){a&&ka('Unmatched or missing tag: "{{/'+a+'}}" in template:\n'+b)}var k,l,u,B=a&&a.allowCode,v=[],J=0,s=[],C=v,E=[,,v];g&&(b=I+b+aa);h(s[0]&&s[0][2].pop()[0]);b.replace(w,function(c,d,k,v,w,t,z,F,m,Y,I,L){t&&(w=":",v=A);Y=Y||g;d=(d||g)&&[[]];var D="",r="",n="",p="",x="",ta="",na="",Ua="";z=!Y&&!w&&!z;k=k||(m=m||"#data",w);y(L);J=L+c.length;F?B&&C.push(["*","\n"+m.replace(G,"$1")+"\n"]):k?("else"===k&&(T.test(m)&&ka('for "{{else if expr}}" use "{{else expr}}"'),d=E[7],E[8]=b.substring(E[8],
L),E=s.pop(),C=E[2],z=!0),m&&(e(m.replace(N," "),d,a).replace(Aa,function(b,a,c,g,d,e,q,k){q?(r+=e+",",p+="'"+k+"',"):c?(n+=g+e+",",ta+=g+"'"+k+"',"):a?na+=e:("trigger"===d&&(Ua+=e),D+=g+e+",",x+=g+"'"+k+"',",u=u||R.test(d));return""}).slice(0,-1),d&&d[0]&&d.pop()),l=[k,v||!!f||u||"",z&&[],[p.slice(0,-1),x.slice(0,-1),ta.slice(0,-1)],[r.slice(0,-1),D.slice(0,-1),n.slice(0,-1)],na,Ua,d||0],C.push(l),z&&(s.push(E),E=l,E[8]=J)):I&&(h(I!==E[0]&&"else"!==E[0]&&I),E[8]=b.substring(E[8],L),E=s.pop());h(!E&&
I);C=E[2]});y(b.length);(J=v[v.length-1])&&h(""+J!==J&&+J[8]===J[8]&&J[0]);g?(k=d(v,b,g),c(k,v[0][7])):k=d(v,a);k._nvw&&(k._nvw=!/[~#]/.test(b));return k}function c(b,a){b.deps=[];for(var c in a)"_jsvto"!==c&&a[c].length&&(b.deps=b.deps.concat(a[c]));b.paths=a}function g(b,a){return"\n\t"+(a?a+":{":"")+"args:["+b[0]+"]"+(b[1]||!a?",\n\tprops:{"+b[1]+"}":"")+(b[2]?",\n\tctx:{"+b[2]+"}":"")}function e(b,a,c){var g,d,e,k,f,h=a&&a[0],l=0,u=c?c.links:h&&(h.links=h.links||{}),J={},E={0:-1},s=0;return(b+
(c?" ":"")).replace(/\)\^/g,").").replace(Ga,function(B,w,A,z,t,m,F,Y,I,L,N,D,G,fa,r,n,p,x,ta,na){function Ua(r,n,b,p,c,x,ta,na){return b&&(h&&("linkTo"===g&&(d=a._jsvto=a._jsvto||[],d.push(t)),g&&!e||h.push(t.slice(n.length))),"."!==b)?(r=(p?'view.hlp("'+p+'")':c?"view":"data")+(na?(x?"."+x:p?"":c?"":"."+b)+(ta||""):(na=p?"":c?x||"":b,"")),r+=na?"."+na:"",n+("view.data"===r.slice(0,9)?r.slice(5):r)):r}m=m||"";A=A||w||D;t=t||I;L=L||p||"";I=na.length-1;if(!F||f||k)return!h||!n||f||k||g&&!e&&!d||(n=
E[s],I>ta-n&&(n=na.slice(n,ta+1),n=C+":"+n+" onerror=''"+v,F=u[n],F||(u[n]=!0,u[n]=F=Ma(n,c||h,!0),F.paths.push({_jsvOb:F})),!0!==F&&(d||h).push({_jsvOb:F}))),f?(f=!G,f?B:'"'):k?(k=!fa,k?B:'"'):(A?(s++,E[s]=ta++,A):"")+(x?s?"":(l=na.slice(l,ta),g?(g=e=d=!1,"\b"):"\b,")+l+(l=ta+B.length,h&&a.push(h=[]),"\b"):Y?(s&&ka(b),h&&a.pop(),g=t,e=z,l=ta+B.length,z&&(h=a[g]=[]),t+":"):t?t.split("^").join(".").replace(ca,Ua)+(L?(J[++s]=!0,"."!==t.charAt(0)&&(E[s]=ta),L):m):m?m:r?(J[s--]=!1,r)+(L?(J[++s]=!0,L):
""):N?(J[s]||ka(b),","):w?"":(f=G,k=fa,'"'));ka(b)})}function d(a,e,f){var h,l,u,k,J,s,v,E,B,C,w,t,z,m,F,L,I,Y,D,G,fa,ma,O,K,aa,r,n=0,p="",x={},ta=a.length;""+e===e?(Y=f?'data-link="'+e.replace(N," ").slice(1,-1)+'"':e,e=0):(Y=e.tmplName||"unnamed",e.allowCode&&(x.allowCode=!0),e.debug&&(x.debug=!0),w=e.bnds,I=e.tmpls);for(h=0;h<ta;h++)if(l=a[h],""+l===l)p+='\n+"'+l+'"';else if(u=l[0],"*"===u)p+=";\n"+l[1]+"\nret=ret";else{k=l[1];fa=l[2];J=g(l[3],"params")+"},"+g(z=l[4]);K=l[5];r=l[6];F=l[8];(m="else"===
u)||(n=0,w&&(t=l[7])&&(n=w.push(t)));(l=":"===u)?k&&(u=k===A?">":k+u):(fa&&(D=qa(F,x),D.tmplName=Y+"/"+u,d(fa,D),I.push(D)),m||(G=u,ma=p,p=""),D=(D=a[h+1])&&"else"===D[0]);aa=K?";\ntry{\nret+=":"\n+";F=m="";if(l&&(t||r||k&&k!==A)){O="return {"+J+"};";L='c("'+k+'",view,';O=new Function("data,view,j,u"," // "+Y+" "+n+" "+u+"\n"+O);O._er=K;m=L+n+",";F=")";O._tag=u;if(f)return O;c(O,t);C=!0}p+=l?(f?(K?"\ntry{\n":"")+"return ":aa)+(C?(C=b,B=E=!0,L+(t?(w[n-1]=O,n):"{"+J+"}")+")"):">"===u?(v=!0,"h("+z[0]+
")"):"((v="+z[0]+')!=null?v:"")'):(B=s=!0,"\n{view:view,tmpl:"+(fa?I.length:"0")+","+J+"},");if(G&&!D){p="["+p.slice(0,-1)+"]";L='t("'+G+'",view,this,';if(f||t){p=new Function("data,view,j,u"," // "+Y+" "+n+" "+G+"\nreturn "+p+";");p._er=K;p._tag=u;t&&c(w[n-1]=p,t);if(f)return p;m=L+n+",undefined,";F=")"}p=ma+aa+L+(n||p)+")";G=t=0}K&&(B=!0,p+=";\n}catch(e){ret"+(f?"urn ":"+=")+m+"j._err(e,view,"+K+")"+F+";}\n"+(f?"":"ret=ret"))}p="// "+Y+"\nvar v"+(s?",t=j._tag":"")+(E?",c=j._cnvt":"")+(v?",h=j.converters.html":
"")+(f?";\n":',ret=""\n')+(x.debug?"debugger;":"")+p+(f?"\n":";\nreturn ret;");try{p=new Function("data,view,j,u",p)}catch(na){ka("Compiled template code:\n\n"+p+'\n: "'+na.message+'"')}e&&(e.fn=p);B||(p._nvw=!0);return p}function J(b,a){return b&&b!==a?a?K(K({},a),b):b:a&&K({},a)}function E(b){return X[b]||(X[b]="&#"+b.charCodeAt(0)+";")}function B(b){var a,c,g=[];if("object"===typeof b)for(a in b)(c=b[a])&&c.toJSON&&!c.toJSON()||M(c)||g.push({key:a,prop:c});return g}function l(b){return null!=b?
$a.test(b)&&(""+b).replace(Q,E)||b:""}if(!(a&&a.render||h.jsviews)){var u,Y,w,s,fa,I="{",C="{",v="}",aa="}",ga="^",ca=/^(!*?)(?:null|true|false|\d[\d.]*|([\w$]+|\.|~([\w$]+)|#(view|([\w$]+))?)([\w$.^]*?)(?:[.[^]([\w$]+)\]?)?)$/g,Ga=/(\()(?=\s*\()|(?:([([])\s*)?(?:(\^?)(!*?[#~]?[\w$.^]+)?\s*((\+\+|--)|\+|-|&&|\|\||===|!==|==|!=|<=|>=|[<>%*:?\/]|(=))\s*|(!*?[#~]?[\w$.^]+)([([])?)|(,\s*)|(\(?)\\?(?:(')|("))|(?:\s*(([)\]])(?=\s*\.|\s*\^|\s*$)|[)\]])([([]?))|(\s+)/g,N=/[ \t]*(\r\n|\n|\r)/g,G=/\\(['"])/g,
t=/['"\\]/g,Aa=/(?:\x08|^)(onerror:)?(?:(~?)(([\w$]+):)?([^\x08]+))\x08(,)?([^\x08]+)/gi,T=/^if\s/,Pa=/<(\w+)[>\s]/,$a=/[\x00`><\"'&]/,R=/^on[A-Z]|^convert(Back)?$/,Q=/[\x00`><"'&]/g,Ra=0,F=0,X={"&":"&amp;","<":"&lt;",">":"&gt;","\x00":"&#0;","'":"&#39;",'"':"&#34;","`":"&#96;"},A="html",ba="data-jsv-tmpl",Sa={},ma={template:{compile:Da},tag:{compile:Ca},helper:{},converter:{}},L={jsviews:"v1.0.0-beta",settings:function(b){K(Ea,b);da(Ea._dbgMode);Ea.jsv&&Ea.jsv()},sub:{View:O,Err:U,tmplFn:Ma,cvt:$,
parse:e,extend:K,syntaxErr:ka,onStore:{},_lnk:m,_ths:f},map:Na,_cnvt:Qa,_tag:La,_err:V};(U.prototype=Error()).constructor=U;za.depends=function(){return[this.get("item"),"index"]};pa.depends=function(){return["index"]};O.prototype={get:ia,getIndex:pa,getRsc:Ba,hlp:oa,_is:"view"};for(Y in ma)ra(Y,ma[Y]);var D=L.templates,Ja=L.converters,Oa=L.helpers,sa=L.tags,va=L.sub,Ea=L.settings;a?(u=a,u.fn.render=wa,u.observable&&(K(va,u.views.sub),L.map=u.views.map)):(u=h.jsviews={},u.isArray=Array&&Array.isArray||
function(b){return"[object Array]"===Object.prototype.toString.call(b)});u.render=Sa;u.views=L;u.templates=D=L.templates;Ea({debugMode:da,delimiters:P,onError:function(a,c,g){c&&(a=g===b?"{Error: "+a+"}":M(g)?g(a,c):g);return a==b?"":a},_dbgMode:!0});sa({"else":function(){},"if":{render:function(b){return this.rendering.done||!b&&(arguments.length||!this.tagCtx.index)?"":(this.rendering.done=!0,this.selected=this.tagCtx.index,this.tagCtx.render(this.tagCtx.view,!0))},onUpdate:function(b,a,c){var g;
for(b=0;(g=this.tagCtxs[b])&&g.args.length;b++)if(g=g.args[0],a=!g!==!c[b].args[0],!this.convert&&g||a)return a;return!1},flow:!0},"for":{render:function(a){var c,g=this.tagCtx,d="",e=0;if(!this.rendering.done){if(c=!arguments.length)a=g.view.data;a!==b&&(d+=g.render(a,c),e+=u.isArray(a)?a.length:1);if(this.rendering.done=e)this.selected=g.index}return d},flow:!0},include:{flow:!0},"*":{render:m,flow:!0}});sa("props",{baseTag:sa["for"],dataMap:Na(B)});Ja({html:l,attr:l,url:function(a){return a!=b?
encodeURI(""+a):null===a?a:""}});P()}})(this,this.jQuery);(function(h,a,b){function f(b){return O(b)?new z(b):new m(b)}function m(b){this._data=b;return this}function z(b){this._data=b;return this}function da(b,a){b=O(b)?b:[b];var e,d,f=a,h=f,B=b.length,l=[];for(e=0;e<B;e++)d=b[e],W(d)?l=l.concat(da(d.call(a,a),a)):""+d!==d?(a=h=d,h!==f&&l.push(f=h)):(h!==f&&l.push(f=h),l.push(d));return l}function U(b,a){var e,d;for(e in b){d=!0;break}d||delete wa[a]}function K(a,g){if(!a.data||!a.data.off){var e,
d,f,h,B,l=g.oldValue,u=g.value,m=a.data,w=m.observeAll,s=!m.cb.noArray,z=m.paths;if(a.type===ra)(m.cb.array||m.cb).call(m,a,g);else if(m.prop===g.path||"*"===m.prop)h=typeof l===Ca&&(z[0]||s&&O(l)),B=typeof u===Ca&&(z[0]||s&&O(u)),w?(e=w._path+"."+g.path,d=w.filter,f=[a.target].concat(w.parents()),h&&ia(s,w.ns,[l],z,m.cb,!0,d,[f],e),B&&ia(s,w.ns,[u],z,m.cb,b,d,[f],e)):(h&&ia(s,[l],z,m.cb,!0),B&&ia(s,[u],z,m.cb)),m.cb(a,g)}}function M(){function c(b,c,g,d){var e,f=ka(A),h=O(A)?[A]:A;b=T?b+"."+T:b;
if(w||d)f&&a(h).off(b,K);else{if(v=f&&a._data(A))for(I=(v=(v=v&&v.events)&&v[g?ra:qa])&&v.length;I--;)if((C=v[I].data)&&C.cb._cId===s._cId&&C.ns===T){if(g)return;("*"===c&&C.prop!==c||C.prop===l)&&a(A).off(b,K)}c=g?{}:{fullPath:u,paths:c?[c]:[],prop:l};c.ns=T;c.cb=s;t&&(c.observeAll={_path:t,path:function(){e=G.length;return t.replace(/[[.]/g,function(b){e--;return"["===b?"["+a.inArray(G[e-1],G[e]):"."})},parents:function(){return G},filter:$,ns:T});a(h).on(b,null,c,K);ca&&((wa[s._cId]=ca)[a.data(A,
"obId")||a.data(A,"obId",la++)]=A)}}function g(b,a){b._ob=aa(b,X);var c=X;return function(g,d){var f=b._ob,h=a.length;typeof f===Ca&&(e(f,!0),(h||R&&O(f))&&ia(R,[f],a,s,aa,!0));f=b._ob=aa(b,c);typeof f===Ca&&(e(f),(h||R&&O(f))&&ia(R,[f],a,s,aa,[c]));s(g,d)}}function e(a,g,d,e){if(R){var h=A,l=t;A=a;e&&(A=a[e],t+="."+e);$&&A&&(A=f._fltr(t,A,e?[a].concat(G):G,$));A&&(d||O(A))&&c(ra+".observe"+(s?".obs"+(fa=s._cId=s._cId||V++):""),b,!0,g);A=h;t=l}}var d,h,m,B,l,u,z,w,s,fa,I,C,v,aa,ga,ca,M,N,G,t,$,T,
ea,Z,R=!1!=this,Q=!0,P=Ka,F=Array.apply(0,arguments);d=F.pop();var X=F.shift(),A=N=X,ba=F.length;X+""===X&&R&&(T=X,X=A=N=F.shift(),ba--);if(W(d))s=d;else if(d+""===d&&(t=d,G=F.pop(),$=F.pop(),d=F.pop(),ba-=3),!0===d?w=d:d&&(X=d,Q=b),d=F[ba-1],ba&&d===b||W(d))s=F.pop(),ba--;ba&&W(F[ba-1])&&(aa=s,s=F.pop(),ba--);P+=w?s?".obs"+s._cId:"":".obs"+(fa=s._cId=s._cId||V++);w||(ca=wa[fa]=wa[fa]||{});ea=T&&T.match(Na)||[""];for(Z=ea.length;Z--;)for(T=ea[Z],O(N)?e(N,w,!0):w&&0===ba&&N&&c(P,""),d=M=0;d<ba;d++)if(u=
F[d],""!==u){A=N;if(""+u===u){B=u.split("^");B[1]&&(M=B[0].split(".").length,u=B.join("."),M=u.split(".").length-M);if(aa&&(ga=aa(u,N))){ba+=ga.length-1;La.apply(F,[d--,1].concat(ga));continue}B=u.split(".")}else Q&&!W(u)&&(u&&u._jsvOb&&(N=g(u,F.slice(d+1)),N.noArray=!R,N._cId=s._cId,ia(R,[X],F.slice(0,d),N,aa),N=b,u=u._ob),A=u),N=u,B=[N];for(;A&&(l=B.shift())!==b;)if(typeof A===Ca){if(""+l===l){if(""===l)continue;if(B.length<M+1&&!A.nodeType){if(!w&&(v=ka(A)&&a._data(A))){I=(v=(v=v.events)&&v[qa])&&
v.length;for(m=0;I--;)!(C=v[I].data)||C.cb!==s||C.ns!==T||C.prop!==l&&"*"!==C.prop||((h=B.join("."))&&C.paths.push(h),m++);if(m){A=A[l];continue}}if("*"===l){!w&&v&&v.length&&c(P,"",!1,!0);W(A)?(z=A.depends)&&ia(R,[z],s,w||X):c(P,"");for(h in A)e(A,w,b,h);break}else l&&c(P+"."+l,B.join("^"))}t&&(t+="."+l);l=A[l]}if(W(l)){(z=l.depends)&&ia(R,[A],da(z,A),s,aa,w||[X]);break}A=l}e(A,w)}fa&&U(ca,fa);return{cbId:fa,bnd:ca}}function P(){[].push.call(arguments,!0);return M.apply(this,arguments)}function ia(){var b=
[].concat.apply([],arguments);return M.apply(b.shift(),b)}function za(b,a,e,d){b+""!==b&&(e=a,a=b,b="");oa(b,this._data,a,e,[],"root",d)}function pa(b,a,e){za.call(this,b,a,e,!0)}function oa(a,g,e,d,h,m,B){function l(b,a){w=b.length;I=[[b]].concat(I);for(K=m+"[]";w--;)u(b,w,a,1)}function u(g,h,l,u){var m;h!==ea&&(m=f._fltr(K,g[h],I,d))&&oa(a,m,e,d||(u?b:0),I.slice(),K,l)}function z(b,a){var c=h;m=b.data.observeAll._path;I=[b.target].concat(h);switch(a.change){case "insert":l(a.items);break;case "remove":l(a.items,
!0);break;case "refresh":l(a.oldItems,!0);l(b.target);break;case "set":K=m+"."+a.path,u(a,"oldValue",!0),u(a,"value")}e.apply(this,arguments);h=c}var w,s,K,I;if(typeof g===Ca){s=O(g)?"":"*";if(e){if(s||0!==d)z._cId=e._cId=e._cId||V++,M(a,g,s,z,B,d,h,m)}else M(a,g,s,b,B,d,h,m);if(s)for(w in I=[g].concat(h),g)K=m+"."+w,u(g,w,B);else l(g,B)}}function Qa(b){return 0>b.indexOf(".")&&0>b.indexOf("[")}if(!a)throw"jsViews/jsObservable require jQuery";if(!a.observable){h=a.views=a.views||{jsviews:"v1.0.0-alpha",
sub:{}};var $=h.sub,Ba=a.event.special,La=[].splice,O=a.isArray,ea=a.expando,Ca="object",Da=parseInt,Na=/\S+/g,qa=$.propChng=$.propChng||"propertyChange",ra=$.arrChng=$.arrChng||"arrayChange",wa=$._cbBnds=$._cbBnds||{},Ka=qa+".observe",W=a.isFunction,la=1,V=1,ka=a.hasData,Ma={};$.getDeps=function(){var b=arguments;return function(){for(var a,e,d=[],f=b.length;f--;)a=b[f--],(e=b[f])&&(d=d.concat(W(e)?e(a,a):e));return d}};a.observable=f;f._fltr=function(b,a,e,d){if(d&&W(d)?d(b,a,e):1)return a=W(a)?
a.set&&a.call(e[0]):a,typeof a===Ca&&a};f.Object=m;f.Array=z;a.observe=f.observe=M;a.unobserve=f.unobserve=P;f._apply=ia;m.prototype={_data:null,observeAll:za,unobserveAll:pa,data:function(){return this._data},setProperty:function(a,g,e){var d,f=this._data;a=a||"";if(f)if(O(a))for(d=a.length;d--;)g=a[d],this.setProperty(g.name,g.value,e===b||e);else if(""+a!==a)for(d in a)this.setProperty(d,a[d],g);else if(a!==ea){for(a=a.split(".");f&&1<a.length;)f=f[a.shift()];f&&this._setProperty(f,a[0],g,e)}return this},
removeProperty:function(a){this.setProperty(a,Ma);return this},_setProperty:function(a,g,e,d){var f,h,m,l=g?a[g]:a;W(l)&&l.set&&(h=l,f=!0===l.set?l:l.set,l=l.call(a));if(l!==e||d&&l!=e)if(!(l instanceof Date)||l>e||l<e)f?(f.call(a,e),e=h.call(a)):(m=e===Ma)?(delete a[g],e=b):g&&(a[g]=e),this._trigger(a,{change:"set",path:g,value:e,oldValue:l,remove:m})},_trigger:function(b,g){a(b).triggerHandler(qa,g)}};z.prototype={_data:null,observeAll:za,unobserveAll:pa,data:function(){return this._data},insert:function(a,
b){var e=this._data;1===arguments.length&&(b=a,a=e.length);a=Da(a);-1<a&&a<=e.length&&(b=O(b)?b:[b],b.length&&this._insert(a,b));return this},_insert:function(a,b){var e=this._data,d=e.length;La.apply(e,[a,0].concat(b));this._trigger({change:"insert",index:a,items:b},d)},remove:function(a,g){var e;e=this._data;a===b&&(a=e.length-1);a=Da(a);g=g?Da(g):0===g?0:1;-1<g&&-1<a&&(e=e.slice(a,a+g),(g=e.length)&&this._remove(a,g,e));return this},_remove:function(a,b,e){var d=this._data,f=d.length;d.splice(a,
b);this._trigger({change:"remove",index:a,items:e},f)},move:function(a,b,e){e=e?Da(e):0===e?0:1;a=Da(a);b=Da(b);if(0<e&&-1<a&&-1<b&&a!==b){var d=this._data.slice(a,a+e);(e=d.length)&&this._move(a,b,e,d)}return this},_move:function(a,b,e,d){var f=this._data,h=f.length;f.splice(a,e);f.splice.apply(f,[b,0].concat(d));this._trigger({change:"move",oldIndex:a,index:b,items:d},h)},refresh:function(a){var b=this._data.slice();this._refresh(b,a);return this},_refresh:function(a,b){var e=this._data,d=e.length;
La.apply(e,[0,e.length].concat(b));this._trigger({change:"refresh",oldItems:a},d)},_trigger:function(b,g){var e=this._data,d=e.length,e=a([e]);e.triggerHandler(ra,b);d!==g&&e.triggerHandler(qa,{change:"set",path:"length",value:d,oldValue:g})}};Ba[qa]=Ba[ra]={remove:function(b){var g,e,d,f,h=b.data;if(h&&(h.off=!0,h=h.cb)&&(g=wa[h._cId])){b=a._data(this).events[b.type];for(d=b.length;d--&&!e;)e=(f=b[d].data)&&f.cb===h;e||(delete g[a.data(this,"obId")],U(g,h._cId))}}};h.map=function(c){function g(a,
d,g){var h,m=this;this.src&&this.unmap();"object"===typeof a&&(m.src=a,m.tgt=g||m.tgt||[],m.options=d||m.options,m.update(),c.obsSrc&&f(m.src).observeAll(m.obs=function(a,d){h||(h=!0,c.obsSrc(m,a,d),h=b)},m.srcFlt),c.obsTgt&&f(m.tgt).observeAll(m.obt=function(a,d){h||(h=!0,c.obsTgt(m,a,d),h=b)},m.tgtFlt))}W(c)&&(c={getTgt:c});c.baseMap&&(c=a.extend({},c.baseMap,c));c.map=function(a,b,c){return new g(a,b,c)};(g.prototype={srcFlt:c.srcFlt||Qa,tgtFlt:c.tgtFlt||Qa,update:function(a){f(this.tgt).refresh(c.getTgt(this.src,
this.options=a||this.options))},unmap:function(){this.src&&(this.obs&&f(this.src).unobserveAll(this.obs,this.srcFlt),this.obt&&f(this.tgt).unobserveAll(this.obt,this.tgtFlt),this.src=b)},map:g,_def:c}).constructor=g;return c}}})(this,this.jQuery);(function(h,a,b){function f(r,n,p){var x,d,c,g,e,f,h,k,l,q=r.target,m=q._jsvBnd,u=/&(\d+)\+?/g;if(m)for(;c=u.exec(m);)if(c=Fa[c[1]])if(n=c.to){c=c.linkCtx;h=c.view;l=c.tag;f=a(q);e=h.hlp(Sa);k=h.hlp(ma);d=M(q);x=y[d];p===b&&(p=Pa(d)?d(q):x?f[x]():f.attr(d));
x=n[1];n=n[0];x&&(g=Pa(x)?x:h.getRsc("converters",x));g&&(p=g.call(l,p));x=h.linkCtx;h.linkCtx=c;d={change:"change",oldValue:c._val,value:p};if(!(e&&!1===e.call(c,r,d)||l&&l.onBeforeChange&&!1===l.onBeforeChange(r,d)||p===b)&&(e=n[0],p!==b&&e)){e=e._jsvOb?e._ob:e;l&&(l._.chging=!0);Q(e).setProperty(n[2]||n[1],p);k&&k.call(c,r,d);if(l){if(l.onAfterChange)l.onAfterChange(r,d);delete l._.chging}c._val=p}h.linkCtx=x}}function m(r,n,p){var x,c,d,e,g,f=this.tag,h=this.data,k=this.elem;d=this.convert;var f=
k.parentNode,l=this.view,q=l.linkCtx,u=l.hlp(Sa);l.linkCtx=this;if(f&&!(u&&n&&!1===u.call(this,r,n)||n&&"*"!==r.data.prop&&r.data.prop!==n.path)){n&&(this.eventArgs=n);if(n||this._initVal){delete this._initVal;if(p._er)try{c=p(h,l)}catch(s){e=p._er,g=I(s,l,(new Function("data,view","return "+e+";"))(h,l)),c=[{props:{},args:[g]}]}else c=p(h,l,G);a:{var z=c,w=f=this.tag;x=this.attr||M(k,!0,d!==b);var t,v,C=w&&w.parentElem||this.elem;if(z!==b){v=a(C);x=w&&w.attr||x;Pa(z)&&I(this.expr+": missing parens");
if(w=/^css-/.test(x)&&x.slice(4))t=a.style(C,w),+z===z&&(t=parseInt(t));else if("link"!==x){if("value"===x)C.type===Ja&&(t=v.prop(x=D));else if(x===Oa)if(C.value===""+z)t=v.prop(D);else break a;t===b&&(t=(t=y[x])?v[t]():v.attr(x))}this._val=t}}if(f){d=e||f._er;c=c[0]?c:[c];p=!d&&n&&f.onUpdate&&!1===f.onUpdate(r,n,c);Ka(f,c,d);if(p||x===sa){x===ja&&f.onBeforeLink&&f.onBeforeLink();Na(f,f.tagCtx);za(this,h,k);l.linkCtx=q;return}if(f._.chging)return;c=":"===f.tagName?G._cnvt(f.cvt,l,c[0]):G._tag(f,l,
l.tmpl,c,!0,g)}else p._tag&&(c=(d=""===d?va:d)?G._cnvt(d,l,c[0]||c):G._tag(p._tag,l,l.tmpl,c,!0,g),f=this.tag,x=this.attr||x);P(c,this,x,f)&&n&&(u=l.hlp(ma))&&u.call(this,r,n);f&&(f._er=e,Na(f,f.tagCtx))}za(this,h,k);l.linkCtx=q}}function z(a,b){a._df=b;a[(b?"set":"remove")+"Attribute"](q,"")}function P(r,n,p,x){var c,d,f,k,l,q,m=r!==b,u=n.data,s=x&&x.parentElem||n.elem,t=a(s),Ta=n.view;q=n._val;var w=Ta.linkCtx,v=x||p===ja;x&&(x.parentElem=x.parentElem||n.expr||x._elCnt?s:s.parentNode,d=x._prv,f=
x._nxt);if(m){"visible"===p&&(p="css-display");if(/^css-/.test(p))"visible"===n.attr&&(n=(s.currentStyle||hb.call(h,s,"")).display,r?(r=s._jsvd||n,r!==sa||(r=db[c=s.nodeName])||(n=N.createElement(c),N.body.appendChild(n),r=db[c]=(n.currentStyle||hb.call(h,n,"")).display,N.body.removeChild(n))):(s._jsvd=n,r=sa)),(v=v||q!==r)&&a.style(s,p.slice(4),r);else if("link"!==p){if(p===D)l=!0,r=r&&"false"!==r;else if(p===Oa)if(s.value===""+r)r=l=!0,p=D;else{za(n,u,s);return}else if("selected"===p||"disabled"===
p||"multiple"===p||"readonly"===p)r=r&&"false"!==r?p:null;if(c=y[p])if(p===ja){Ta.linkCtx=n;if(x&&x._.inline){p=x.nodes(!0);if(x._elCnt){if(d&&d!==f)g(d,f,s,x._tgId,"^",!0);else if(k=s._df)q=x._tgId+"^",c=k.indexOf("#"+q)+1,l=k.indexOf("/"+q),c&&0<l&&(c+=q.length,l>c&&(z(s,k.slice(0,c)+k.slice(l)),e(k.slice(c,l))));d=d?d.previousSibling:f?f.previousSibling:s.lastChild}a(p).remove();if(x&&x.onBeforeLink)x.onBeforeLink();k=Ta.link(Ta.data,s,d,f,r,x&&{tag:x._tgId,lazyLink:x.tagCtx.props.lazyLink})}else{m&&
t.empty();if(x&&x.onBeforeLink)x.onBeforeLink();m&&(k=Ta.link(u,s,d,f,r,x&&{tag:x._tgId}))}Ta.linkCtx=w}else{if(v=v||q!==r)if("text"===p&&s.children&&!s.children[0])s.textContent!==b?s.textContent=r:s.innerText=null===r?"":r;else t[c](r)}else if(v=v||q!==r)t[l?"prop":"attr"](p,r!==b||l?r:null);n._val=r}return k||v}if(p===ja&&x&&x.onBeforeLink)x.onBeforeLink()}function U(a,b){var p=this.hlp(Sa),x=this.hlp(ma);if(!p||!1!==p.call(this,a,b)){if(b){var p=b.index,c=b.items;switch(b.change){case "insert":this.addViews(p,
c);break;case "remove":this.removeViews(p,c.length);break;case "move":this.refresh();break;case "refresh":this.refresh()}}x&&x.call(this,a,b)}}function K(r){var n,p=r.type,x=r.data,c=r._.bnd;if(!r._.useKey&&c){if(n=r._.bndArr)a([n[1]]).off(A,n[0]),r._.bndArr=b;c!==!!c&&c._.inline?p?c._.arrVws[r._.id]=r:delete c._.arrVws[r._.id]:p&&x&&(n=function(a){a.data&&a.data.off||U.apply(r,arguments)},a([x]).on(A,n),r._.bndArr=[n,x])}}function M(a,b,p){var c=a.nodeName.toLowerCase(),d=Aa.merge[c]||a.contentEditable===
va&&{to:ja,from:ja};return d?b?"input"===c&&a.type===Oa?Oa:d.to:d.from:b?p?"text":ja:""}function ab(r,n,p,c,d,f,e){var h,k,l,q=r.parentElem,m=r._prv,s=r._nxt,u=r._elCnt;m&&m.parentNode!==q&&I("Missing parentNode");if(e)for(l in k=r.nodes(),u&&m&&m!==s&&g(m,s,q,r._.id,"_",!0),r.removeViews(b,b,!0),c=s,u&&(m=m?m.previousSibling:s?s.previousSibling:q.lastChild),a(k).remove(),r._.bnds)la(l);else{if(n){h=c[n-1];if(!h)return!1;m=h._nxt}u?m=(c=m)?c.previousSibling:q.lastChild:c=m.nextSibling}n=p.render(d,
f,r._.useKey&&e,r,e||n,!0);r.link(d,q,m,c,n,h)}function ia(a,n,p){var c;p?(c="^`",n=n._.tag,p=n._tgId,p||(Fa[p=eb++]=n,n._tgId=""+p)):(c="_`",Ga[p=n._.id]=n);return"#"+p+c+(a!=b?a:"")+"/"+p+c}function za(a,n,p){var c,d=a.tag,e=a.convertBack,f=[],g=a._bndId||""+eb++,h=a._hdlr;delete a._bndId;d&&(f=d.depends||f,f=Pa(f)?d.depends(d):f,c=d.linkedElem);if(!a._depends||""+a._depends!==""+f)if(a._depends&&Q._apply(!1,[n],a._depends,h,!0),n=Q._apply(!1,[n],a.fn.deps,f,h,a._ctxCb),n.elem=p,n.linkCtx=a,n._tgId=
g,p._jsvBnd=p._jsvBnd||"",p._jsvBnd+="&"+g,a._depends=f,a.view._.bnds[g]=g,Fa[g]=n,c&&(n.to=[[],e]),(c||e!==b)&&wa(n,d&&d.convertBack||e),d){if(d.onAfterBind)d.onAfterBind(n);d.flow||d._.inline||(p.setAttribute(F,(p.getAttribute(F)||"")+"#"+g+"^/"+g+"^"),d._tgId=""+g)}if(c&&c[0])for(d._.radio&&(c=c.children("input[type=radio]")),a=c.length;a--;)c[a]._jsvBnd=c[a]._jsvBnd||p._jsvBnd+"+",c[a]._jsvLkEl=d}function pa(a,b,p,c,d,f,e){return oa(this,a,b,p,c,d,f,e)}function oa(r,n,p,c,d,e,g,h){if(r&&n){n=
n.jquery?n:a(n);B||(B=N.body,a(B).on(ba,f).on("blur","[contenteditable]",f));for(var k,q,m,s,u,t,v,w,y=ia,C=c&&"replace"===c.target,A=n.length;A--;)if(v=n[A],""+r===r)$(r,v,l(v),b,!0,p,c);else{e=e||l(v);if(r.markup!==b)!1===e.link&&(c=c||{},c.link=y=!1),C&&(t=v.parentNode),m=r.render(p,c,d,e,b,y),t?(g=v.previousSibling,h=v.nextSibling,a.cleanData([v],!0),t.removeChild(v),v=t):(g=h=b,a(v).empty());else if(!0===r&&e===ca)w={lnk:1};else break;if(v._df&&!h){s=ea(v._df,!0,fb);k=0;for(q=s.length;k<q;k++)u=
s[k],(u=Ga[u.id])&&u.data!==b&&u.parent.removeViews(u._.key,b,!0);z(v)}e.link(p,v,g,h,m,w,c)}}return n}function Qa(r,n,p,c,d,e,f,g){function h(a,r,n,c,p,e,f,g,x,k,l,q,m){var u,na="";if(m)return s=0,a;t=g||x||"";c=c||k;n=n||q;ka&&!n&&(c||t||e)&&(ka=b,xa=la.shift());if(c=c||n)s=0,ka=b,ca&&(n||q?Za[xa]||/;svg;|;math;/.test(";"+la.join(";")+";")||(u="'<"+xa+".../"):Za[c]?u="'</"+c:la.length&&c===xa||(u="Mismatch: '</"+c),u&&Xa(u+">' in:\n"+d)),qa=ya,xa=la.shift(),ya=Ya[xa],k=k?"</"+k+">":"",qa&&(ua+=
Ha,Ha="",ya?ua+="-":(na=k+ha+"@"+ua+Ea+(l||""),ua=Ja.shift()));ya?(e?Ha+=e:r=k||q||"",t&&(r+=t,Ha&&(r+=" "+F+'="'+Ha+'"',Ha=""))):r=e?r+na+p+ha+e+Ea+f+t:na||a;s&&e&&Xa(" No {^{ tags within elem markup ("+s+' ). Use data-link="..."');t&&(s=t,la.unshift(xa),xa=t.slice(1),la[0]&&la[0]===mb[xa]&&I("Parent of <tr> must be <tbody>"),ka=Za[xa],(ya=Ya[xa])&&!qa&&(Ja.unshift(ua),ua=""),qa=ya,ua&&ya&&(ua+="+"));return r}function k(a,r){var c,p,d,e,f=[];if(a){"@"===a._tkns.charAt(0)&&(r=H.previousSibling,H.parentNode.removeChild(H),
H=b);for(B=a.length;B--;){E=a[B];d=E.ch;if(c=E.path)for(A=c.length-1;p=c.charAt(A--);)"+"===p?"-"===c.charAt(A)?(A--,r=r.previousSibling):r=r.parentNode:r=r.lastChild;if("^"===d){if(t=Fa[c=E.id]){p=r&&(!H||H.parentNode!==r);if(!H||p)t.parentElem=r;E.elCnt&&p&&z(r,(E.open?"#":"/")+c+d+(r._df||""));f.push([p?null:H,E])}}else if(D=Ga[c=E.id])(D.parentElem||(D.parentElem=r||H&&H.parentNode||n,D._.onRender=ia,D._.onArrayChange=U,K(D)),p=D.parentElem,E.open)?(D._elCnt=E.elCnt,r&&!H?z(r,"#"+c+d+(r._df||
"")):(D._prv||z(p,La(p._df,"#"+c+d)),D._prv=H)):(!r||H&&H.parentNode===r?H&&(D._nxt||z(p,La(p._df,"/"+c+d)),D._nxt=H):(z(r,"/"+c+d+(r._df||"")),D._nxt=b),v=D.linkCtx,(e=D.ctx&&D.ctx.onAfterCreate||Ma)&&e.call(v,D))}for(B=f.length;B--;)sa.push(f[B])}return!a||a.elCnt}function m(a){var b,r;if(a)for(B=a.length,A=0;A<B;A++)if(E=a[A],r=t=Fa[E.id].linkCtx.tag,!t.flow){if(!W){for(b=1;r=r.parent;)b++;da=da||b}!W&&b!==da||Y&&t.tagName!==Y||ba.push(t)}}function u(){var e,g,h="";g={};e=aa+(Ia?",["+q+"]":"");
G=S?n.querySelectorAll(e):a(e,n).get();y=G.length;p&&p.innerHTML&&(P=S?p.querySelectorAll(e):a(e,p).get(),p=P.length?P[P.length-1]:p);for(w=da=0;w<y;w++)if(H=G[w],p&&!za)za=H===p;else if(c&&H===c){Ia&&(h+=O(H));break}else if(H.parentNode)if(Ia){h+=O(H);if(H._df){for(e=w+1;e<y&&H.contains(G[e]);)e++;g[e-1]=H._df}g[w]&&(h+=g[w]||"")}else wa&&(E=ea(H,b,gb))&&(E=E[0])&&(pa=pa?E.id!==pa&&pa:E.open&&E.id),!pa&&Ka(ea(H))&&H.getAttribute(C)&&sa.push([H]);if(Ia){h+=n._df||"";if(g=h.indexOf("#"+Ia.id)+1)h=
h.slice(g+Ia.id.length);g=h.indexOf("/"+Ia.id);g+1&&(h=h.slice(0,g));m(ea(h,b,qb))}d===b&&n.getAttribute(C)&&sa.push([n]);Ca(p,ya);Ca(c,ya);if(!Ia){if(ya&&ua+Ha&&(H=c,ua&&(c?k(ea(ua+"+",!0),c):k(ea(ua,!0),n)),k(ea(Ha,!0),n),c)){h=c.getAttribute(F);if(y=h.indexOf(ra)+1)h=h.slice(y+ra.length-1);c.setAttribute(F,Ha+h)}y=sa.length;for(w=0;w<y;w++)if(H=sa[w],J=H[1],H=H[0],J){if(t=Fa[J.id]){if(v=t.linkCtx)t=v.tag,t.linkCtx=v;J.open?(H&&(t.parentElem=H.parentNode,t._prv=H),t._elCnt=J.elCnt,!t||t.onBeforeLink&&
!1===t.onBeforeLink()||t._.bound||(t._.bound=!0,D=t.tagCtx.view,$(b,t._prv,D,J.id)),t._.linking=!0):(t._nxt=H,t._.linking&&(Z=t.tagCtx,D=Z.view,delete t._.linking,t._.bound||(t._.bound=!0,$(b,t._prv,D,J.id)),Na(t,Z)))}}else $(H.getAttribute(C),H,l(H),b,wa,r,f)}oa&&oa.resolve()}var s,v,t,w,y,A,B,G,H,D,E,J,P,M,T,R,Q,ba,W,Y,Z,ca,da,X,V,xa,ka,ma,ja,ya,qa,Ha,ra,za,pa,oa,wa,Ia,Ba=this._.id+"_",ua="",sa=[],la=[],Ja=[],Ma=this.hlp(L),Ka=k;if(e){oa=e.lazyLink&&a.Deferred();if(e.tmpl)T="/"+e._.id+"_";else if(wa=
e.lnk,e.tag&&(Ba=e.tag+"^",e=!0),Ia=e.get)Ka=m,ba=Ia.tags,W=Ia.deep,Y=Ia.name;e=!0===e}n=n?""+n===n?a(n)[0]:n.jquery?n[0]:n:this.parentElem||N.body;ca=!Aa.noValidate&&n.contentEditable!==va;xa=n.tagName.toLowerCase();ya=!!Ya[xa];p=p&&Da(p,ya);c=c&&Da(c,ya)||null;if(d!=b){ma=X=N.createElement("div");ra=Ha="";V="http://www.w3.org/2000/svg"===n.namespaceURI?"svg_ns":(M=kb.exec(d))&&M[1]||"";fa&&M&&M[2]&&I("Unsupported: "+M[2]);if(ya){for(Q=c;Q&&!(R=ea(Q));)Q=Q.nextSibling;if(ja=R?R._tkns:n._df){M=T||
"";if(e||!T)M+="#"+Ba;A=ja.indexOf(M);A+1&&(A+=M.length,ra=Ha=ja.slice(0,A),ja=ja.slice(A),R?Q.setAttribute(F,ja):z(n,ja))}}ka=b;d=(""+d).replace(ob,h);ca&&la.length&&Xa("Mismatched '<"+xa+"...>' in:\n"+d);if(g)return;cb.appendChild(X);V=ga[V]||ga.div;e=V[0];for(ma.innerHTML=V[1]+d+V[2];e--;)ma=ma.lastChild;cb.removeChild(X);for(X=N.createDocumentFragment();V=ma.firstChild;)X.appendChild(V);n.insertBefore(X,c)}oa?setTimeout(u,0):u();return oa&&oa.promise()}function $(r,n,c,d,e,f,g){var h,k,l,q,m,
s,v;if(d)e=Fa[d],e=e.linkCtx?e.linkCtx.tag:e,s=e.linkCtx||{data:c.data,elem:e._elCnt?e.parentElem:n,view:c,ctx:c.ctx,attr:ja,fn:e._.bnd,tag:e,_bndId:d},Ba(s,s.fn);else if(r&&n)for(f=e?f:c.data,d=c.tmpl,k=M(n),r=a.trim(r).replace(lb,"\\$&"),r=r.slice(-1)!==w?Y+":"+r+(k?":":"")+w:r,u.lastIndex=0;h=u.exec(r);)v=u.lastIndex,k=h[1],m=h[3],q=h[10],l=b,s={data:f,elem:n,view:c,ctx:g,attr:k,isLk:e,_initVal:!h[2]},h[6]&&(!k&&(l=/:([\w$]*)$/.exec(q))&&(l=l[1],l!==b&&(q=-l.length-1,m=m.slice(0,q-1)+w)),null===
l&&(l=b),s.convert=h[5]||""),s.expr=k+m,(h=d.links[m])||(d.links[m]=h=t.tmplFn(m,d,!0,l)),s.fn=h,k||l===b||(s.convertBack=l),Ba(s,h),u.lastIndex=v}function Ba(a,n){function c(b,p){m.call(a,b,p,n)}c.noArray=!0;a.isLk&&(a.view=new t.View(a.ctx,"link",ca,a.data,ca.tmpl,b,b,ia));a._ctxCb=Ma(a.view);a._hdlr=c;c(!0)}function La(a,b){var c;return a?(c=a.indexOf(b),c+1?a.slice(0,c)+a.slice(c+b.length):a):""}function O(a){return a&&(""+a===a?a:"SCRIPT"===a.tagName?a.type.slice(3):1===a.nodeType&&a.getAttribute(F)||
"")}function ea(a,b,c){function d(a,b,r,c,n,p){f.push({elCnt:e,id:c,ch:n,open:b,close:r,path:p,token:a})}var e,f=[];if(b=b?a:O(a))return f.elCnt=!a.type,e="@"===b.charAt(0)||!a.type,f._tkns=b,b.replace(c||rb,d),f}function Ca(a,b){a&&("jsv"===a.type?a.parentNode.removeChild(a):b&&""===a.getAttribute(C)&&a.removeAttribute(C))}function Da(a,b){for(var c=a;b&&c&&1!==c.nodeType;)c=c.previousSibling;c&&(1!==c.nodeType?(c=N.createElement("SCRIPT"),c.type="jsv",a.parentNode.insertBefore(c,a)):O(c)||c.getAttribute(C)||
c.setAttribute(C,""));return c}function Na(c,n){var p,d,e,f,g,h,k;p=n.view;var l=c.linkCtx=c.linkCtx||{tag:c,data:p.data,view:p,ctx:p.ctx};if(c.onAfterLink)c.onAfterLink(n,l);if(d=(p=c.targetTag?c.targetTag.linkedElem:c.linkedElem)&&p[0]){if(e=c._.radio)p=p.children("input[type=radio]");if(e||!c._.chging){f=t.cvt(c,c.convert)[0];if(e||d!==l.elem){for(k=p.length;k--;){d=p[k];g=d._jsvLkEl;if(c._.inline&&(!g||g!==c&&g.targetTag!==c))for(d._jsvLkEl=c,g=l.elem?l.elem._jsvBnd:c._prv._jsvBnd,d._jsvBnd=g+
"+",g=g.slice(1).split("&"),h=g.length;h--;)wa(Fa[g[h]],c.convertBack);e&&(d[D]=f===d.value)}l._val=f}f!==b&&(e||d.value===b?d.contentEditable===va&&(d.innerHTML=f):d.type===Ja?d[D]=f&&"false"!==f:p.val(f))}}if(d=d||":"===c.tagName&&l.elem)e=d._jsvTr,f=n.props.trigger,e!==f&&(d._jsvTr=f,p=p||a(d),ra(p,e,"off"),ra(p,f,"on"))}function qa(a){setTimeout(function(){f(a)},0)}function ra(a,b,c){b&&a[c](!0===b?"keydown":b,!0===b?qa:f)}function wa(a,b){var c,d,e,f,g,h=a.linkCtx,k=h.data,l=h.fn.paths;if(a&&
l){for(d=(l=(c=l._jsvto)||l[0])&&l.length;d&&""+(f=l[--d])!==f;);!f||h.tag&&!h.tag.tagCtx.args.length?a.to=[[],b]:(f=f.split("^").join("."),a.to="."===f.charAt(0)?[[g=l[d-1],f.slice(1)],b]:[h._ctxCb(e=d?l[0].split("^").join("."):f)||[k,e],b],c&&g&&(a.to[0][0]=h._ctxCb(g,k)))}}function Ka(a,b,c){var d;d=a.tagCtx.view;var e=a.tagCtxs||[a.tagCtx],f=e.length,g=!b;b=b||a._.bnd.call(d.tmpl,(a.linkCtx||d).data,d,G);if(c)e=a.tagCtxs=b,a.tagCtx=e[0];else for(;f--;)c=e[f],d=b[f],Q(c.props).setProperty(d.props),
T(c.ctx,d.ctx),c.args=d.args,g&&(c.tmpl=d.tmpl);t._ths(a,e[0]);return e}function W(a){for(var b,c,d=[],f=b=a.length;f--;)d.push(a[f]);for(f=b;f--;)if(b=d[f],b.parentNode){if(c=b._jsvBnd)for(c=c.slice(1).split("&"),b._jsvBnd="",a=c.length;a--;)la(c[a],b._jsvLkEl,b);e(O(b)+(b._df||""))}}function la(c,d,e){var f,g,h,k=Fa[c];if(d)e===d.linkedElem[0]&&(delete e._jsvLkEl,delete d.linkedElem);else if(k){delete Fa[c];for(f in k.bnd)d=k.bnd[f],e=".obs"+k.cbId,a.isArray(d)?a([d]).off(A+e).off(X+e):a(d).off(X+
e),delete k.bnd[f];if(f=k.linkCtx){if(d=f.tag){if(e=d.tagCtxs)for(g=e.length;g--;)(h=e[g].map)&&h.unmap();if(g=(e=(h=d.linkedElem)&&h[0]||f.elem)&&e._jsvTr)ra(h||a(e),g,"off"),e._jsvTr=b;if(d.onDispose)d.onDispose();d._elCnt||(d._prv&&d._prv.parentNode.removeChild(d._prv),d._nxt&&d._nxt.parentNode.removeChild(d._nxt))}delete f.view._.bnds[c]}delete t._cbBnds[k.cbId]}}function V(c,d){c===b?(B&&(a(B).off(ba,f).off("blur","[contenteditable]",f),B=b),c=!0,ca.removeViews(),W(N.body.getElementsByTagName("*"))):
d&&!0===c&&(d=d.jquery?d:a(d),d.each(function(){for(var a;(a=l(this,!0))&&a.parent;)a.parent.removeViews(a._.key,b,!0);W(this.getElementsByTagName("*"));W([this])}));return d}function ka(a,b){return V(this,a,b)}function Ma(a){return function(b,c){var d,e,f=[c];if(a&&b){if(b._jsvOb)return b._jsvOb.call(a.tmpl,c,a,G);if("~"===b.charAt(0)){if("~tag"===b.slice(0,4)&&(e=a.ctx,"."===b.charAt(4)&&(d=b.slice(5).split("."),e=e.tag),d))return e?[e,d.join("."),c]:[];b=b.slice(1).split(".");if(c=a.hlp(b.shift()))b.length&&
f.unshift(b.join(".")),f.unshift(c);return c?f:[]}if("#"===b.charAt(0))return"#data"===b?[]:[a,b.replace(nb,""),c]}}}function c(a){return a.type===Ja?a[D]:a.value}function g(a,b,c,d,e,f){var g,h,k,l,q,m,s=0,t=a===b;if(a){k=ea(a)||[];g=0;for(h=k.length;g<h;g++){l=k[g];m=l.id;if(m===d&&l.ch===e)if(f)h=0;else break;t||(q="_"===l.ch?Ga[m]:Fa[m].linkCtx.tag,l.open?q._prv=b:l.close&&(q._nxt=b));s+=m.length+2}s&&a.setAttribute(F,a.getAttribute(F).slice(s));a=b?b.getAttribute(F):c._df;if(h=a.indexOf("/"+
d+e)+1)a=k._tkns.slice(0,s)+a.slice(h+(f?-1:d.length+1));a&&(b?b.setAttribute(F,a):z(c,a))}else z(c,La(c._df,"#"+d+e)),f||b||z(c,La(c._df,"/"+d+e))}function e(a){var c,d,e;if(e=ea(a,!0,pb))for(a=0,c=e.length;a<c;a++)d=e[a],"_"===d.ch?(d=Ga[d.id])&&d.type&&d.parent.removeViews(d._.key,b,!0):la(d.id)}function d(a,b,c){if("set"===c.change){a=a.tgt;for(b=a.length;b--&&a[b].key!==c.path;);-1===b?c.path&&Q(a).insert({key:c.path,prop:c.value}):c.remove?Q(a).remove(b):Q(a[b]).setProperty("prop",c.value)}}
function J(a,b,c){a=a.src;var d=c.change;"set"===d?"prop"===c.path?Q(a).setProperty(b.target.key,c.value):(Q(a).setProperty(c.oldValue,null),delete a[c.oldValue],Q(a).setProperty(c.value,b.target.prop)):"remove"===d?(b=c.items[0],Q(a).removeProperty(b.key),delete a[b.key]):"insert"===d&&(b=c.items[0],b.key&&Q(a).setProperty(b.key,b.prop))}function E(a){return 0>a.indexOf(".")}var B,l,u,Y,w,s,fa,I,C,v,aa,ga,ca,Ga,N=h.document,G=a.views,t=G.sub,Aa=G.settings,T=t.extend,Pa=a.isFunction,$a=G.converters,
R=G.tags,Q=a.observable,Ra=Q.observe,F="data-jsv",X=t.propChng=t.propChng||"propertyChange",A=t.arrChng=t.arrChng||"arrayChange",ba="change.jsv",Sa="onBeforeChange",ma="onAfterChange",L="onAfterCreate",D="checked",Ja="checkbox",Oa="radio",sa="none",va="true",Ea='">\x3c/script>',ha='<script type="jsv',q=F+"-df",Wa="script,["+F+"]",ja="html",y={value:"val",input:"val",html:ja,text:"text"},bb={from:"value",to:"value"},k=0,ib=a.cleanData,jb=Aa.delimiters,Xa=t.syntaxErr,kb=/<(?!script)(\w+)(?:[^>]*(on\w+)\s*=)?[^>]*>/,
lb=/['"\\]/g,cb=N.createDocumentFragment(),S=N.querySelector,Ya={ol:1,ul:1,table:1,tbody:1,thead:1,tfoot:1,tr:1,colgroup:1,dl:1,select:1,optgroup:1,svg:1,svg_ns:1},mb={tr:"table"},Za={br:1,img:1,input:1,hr:1,area:1,base:1,col:1,link:1,meta:1,command:1,embed:1,keygen:1,param:1,source:1,track:1,wbr:1},db={},Fa={},eb=1,nb=/^#(view\.?)?/,ob=/(^|(\/>)|<\/(\w+)>|)(\s*)([#\/]\d+[_^])`(\s*)(<\w+(?=[\s\/>]))?|\s*(?:(<\w+(?=[\s\/>]))|<\/(\w+)>(\s*)|(\/>)\s*|(>))/g,fb=/(#)()(\d+)(_)/g,pb=/(#)()(\d+)([_^])/g,
gb=/(?:(#)|(\/))(\d+)(_)/g,qb=/(#)()(\d+)(\^)/g,rb=/(?:(#)|(\/))(\d+)([_^])([-+@\d]+)?/g,hb=h.getComputedStyle;if(!a)throw"JsViews requires jQuery";if(!G)throw"JsViews requires JsRender";if(!Q)throw"JsViews requires jquery.observable";a.link||(v={contents:function(c,d){c!==!!c&&(d=c,c=b);var e,f=a(this.nodes());f[0]&&(e=d?f.filter(d):f,f=c&&d?e.add(f.find(d)):e);return f},nodes:function(a,b,c){var d=this._elCnt,e=!b&&d,f=[];b=b||this._prv;c=c||this._nxt;for(b=e?b===this._nxt?this.parentElem.lastSibling:
b:!1===this._.inline?b||this.linkCtx.elem.firstChild:b&&b.nextSibling;b&&(!c||b!==c);)(a||d||"SCRIPT"!==b.tagName)&&f.push(b),b=b.nextSibling;return f},childTags:function(a,c){a!==!!a&&(c=a,a=b);var d=this._prv,e=[];(this.link?this:this.tagCtx.view).link(b,this.parentElem,this._elCnt?d&&d.previousSibling:d,this._nxt,b,{get:{tags:e,deep:a,name:c,id:this.link?this._.id+"_":this._tgId+"^"}});return e},refresh:function(a){var c,d=this.linkCtx,e=this.tagCtx.view;this.disposed&&I("Removed tag");a===b&&
(a=G._tag(this,e,e.tmpl,Ka(this),!0));a+""===a&&(c=this._.inline?ja:d.attr||M(this.parentElem,!0),c=P(a,d,c,this));Na(this,this.tagCtx);return c||this},update:function(a){var c=this.linkedElem;c&&f({target:c[0]},b,a)}},t.onStore.template=function(b,c){c.link=pa;c.unlink=ka;b&&(a.link[b]=function(){return pa.apply(c,arguments)},a.unlink[b]=function(){return ka.apply(c,arguments)})},t.onStore.tag=function(a,b){t._lnk(b)},t._lnk=function(a){return T(a,v)},t.viewInfos=ea,(Aa.delimiters=function(){var a=
jb.apply(G,arguments);Y=a[1];w=a[2];s=a[4];u=RegExp("(?:^|\\s*)([\\w-]*)(\\"+s+")?(\\"+Y+t.rTag+"\\"+w+")","g");return this})(),T(t._lnk(t.View.prototype),{addViews:function(a,b,c){var d,e=b.length,f=this.views;if(!this._.useKey&&e&&(c=this.tmpl)&&(d=f.length+e,!1!==ab(this,a,c,f,b,this.ctx)))for(a+=e;a<d;a++)Q(f[a]).setProperty("index",a);return this},removeViews:function(c,d,e){function f(c){var d,h,r,k,l,n=m[c];if(n&&n.link){c=n._.id;e||(l=n.nodes());n.removeViews(b,b,!0);n.type=b;r=n._prv;k=n._nxt;
h=n.parentElem;e||(n._elCnt&&g(r,k,h,c,"_"),a(l).remove());if(!n._elCnt)try{r.parentNode.removeChild(r),k.parentNode.removeChild(k)}catch(q){}K(n);for(d in n._.bnds)la(d);delete Ga[c]}}var h,k,l=!this._.useKey,m=this.views;l&&(k=m.length);if(c===b)if(l){for(h=k;h--;)f(h);this.views=[]}else{for(h in m)f(h);this.views={}}else if(d===b&&(l?d=1:(f(c),delete m[c])),l&&d){for(h=c+d;h-- >c;)f(h);m.splice(c,d);if(k=m.length)for(;c<k;)Q(m[c]).setProperty("index",c++)}return this},refresh:function(a){var b=
this.parent;b&&(ab(this,this.index,this.tmpl,b.views,this.data,a,!0),K(this));return this},link:Qa}),Ga={0:ca=new t.View},$a.merge=function(a){var b,c=this.linkCtx._val||"",d=this.tagCtx.props.toggle;d&&(b=d.replace(/[\\^$.|?*+()[{]/g,"\\$&"),c=c.replace(RegExp("(\\s(?="+b+"$)|(\\s)|^)("+b+"(\\s|$))"),"$2"),a=c+(a?(c&&" ")+d:""));return a},R("on",{attr:sa,onAfterLink:function(c,d){for(var e,f,h=0,g=c.args,k=g.length,l=c.props.data,m=c.view,q=c.props.context;h<k&&!(f=Pa(e=g[h++])););if(f){f=g.slice(h);
g=g.slice(0,h-1);q||(q=(q=/^(.*)[\.^][\w$]+$/.exec(c.params.args.slice(-f.length-1)[0]))&&t.tmplFn("{:"+q[1]+"}",m.tmpl,!0)(d.data,m));if(this._evs)this.onDispose();a(d.elem).on(this._evs=g[0]||"click",this._sel=g[1],l==b?null:l,this._hlr=function(a){return e.apply(q||d.data,[].concat(f,a,{change:a.type,view:m,linkCtx:d}))})}},onDispose:function(){a(this.parentElem).off(this._evs,this._sel,this._hlr)},flow:!0}),T(R["for"],{onArrayChange:function(a,b){var c,d=b.change;if(this.tagCtxs[1]&&("insert"===
d&&a.target.length===b.items.length||"remove"===d&&!a.target.length||"refresh"===d&&!b.oldItems.length!==!a.target.length))this.refresh();else for(c in this._.arrVws)c=this._.arrVws[c],c.data===a.target&&c._.onArrayChange.apply(c,arguments);a.done=!0},onAfterLink:function(){var b,c,d,e,f=this,g=f._ars||{},h=f.tagCtxs,k=h.length,l=f.selected||0;for(b=0;b<=l;b++)c=h[b],e=c.map?c.map.tgt:c.args.length?c.args[0]:c.view.data,(d=g[b])&&e!==d[0]&&(Ra(d[0],d[1],!0),delete g[b]),!g[b]&&a.isArray(e)&&(Ra(e,
c=function(a,b){f.onArrayChange(a,b)}),g[b]=[e,c]);for(b=l+1;b<k;b++)if(d=g[b])Ra(d[0],d[1],!0),delete g[b];f._ars=g},onDispose:function(){for(var a in this._ars)Ra(this._ars[a][0],this._ars[a][1],!0)}}),T(R["for"],v),T(R["if"],v),T(R.include,v),R("props",{baseTag:R["for"],dataMap:G.map({getTgt:R.props.dataMap.getTgt,obsSrc:d,obsTgt:J,tgtFlt:E})}),T(a,{view:G.view=l=function(c,d,e){function f(a,b){if(a)for(h=ea(a,b,fb),k=0,l=h.length;k<l&&(!(g=Ga[h[k].id])||!(g=g&&e?g.get(!0,e):g));k++);}d!==!!d&&
(e=d,d=b);var g,h,k,l,m;m=0;var q=N.body;if(c&&c!==q&&1<ca._.useKey&&(c=""+c===c?a(c)[0]:c.jquery?c[0]:c)){if(d){f(c._df,!0);if(!g)for(m=S?c.querySelectorAll(Wa):a(Wa,c).get(),d=m.length,c=0;!g&&c<d;c++)f(m[c]);return g}for(;c;){if(h=ea(c,b,gb))for(d=h.length;d--;)if(g=h[d],g.open){if(1>m)return(g=Ga[g.id])&&e?g.get(e):g||ca;m--}else m++;c=c.previousSibling||c.parentNode}}return ca},link:G.link=oa,unlink:G.unlink=V,cleanData:function(b){b.length&&k&&W(b);ib.apply(a,arguments)}}),G.utility={validate:function(a){try{ca.link(b,
N.createElement("div"),b,b,a,b,b,1)}catch(c){return c.message}}},T(a.fn,{link:function(a,b,c,d,e,f,g){return oa(a,this,b,c,d,e,f,g)},unlink:function(a){return V(a,this)},view:function(a){return l(this[0],a)}}),a.each([ja,"replaceWith","empty","remove"],function(b,c){var d=a.fn[c];a.fn[c]=function(){var a;k=1;try{a=d.apply(this,arguments)}finally{k=0}return a}}),T(ca,{tmpl:{links:{},tags:{}}}),ca._.onRender=ia,Aa({wrapMap:ga={option:[1,"<select multiple='multiple'>","</select>"],legend:[1,"<fieldset>",
"</fieldset>"],area:[1,"<map>","</map>"],param:[1,"<object>","</object>"],thead:[1,"<table>","</table>"],tr:[2,"<table><tbody>","</tbody></table>"],td:[3,"<table><tbody><tr>","</tr></tbody></table>"],col:[2,"<table><tbody></tbody><colgroup>","</colgroup></table>"],svg_ns:[1,"<svg>","</svg>"],div:jQuery.support.htmlSerialize?[0,"",""]:[1,"X<div>","</div>"]},linkAttr:C="data-link",merge:{input:{from:c,to:"value"},textarea:bb,select:bb,optgroup:{to:"label"}},jsrDbgMode:Aa.debugMode,debugMode:function(a){Aa.jsrDbgMode(a);
a?h._jsv={views:Ga,bindings:Fa}:delete h._jsv},jsv:function(){Aa.debugMode(Aa._dbgMode);C=Aa.linkAttr;I=G._err;aa=Wa+",["+C+"]";fa=Aa.noDomLevel0;ga.optgroup=ga.option;ga.tbody=ga.tfoot=ga.colgroup=ga.caption=ga.thead;ga.th=ga.td}}))})(this,this.jQuery)}())},{}]},{},[1])(1)});
